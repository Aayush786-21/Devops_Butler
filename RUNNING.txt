DevOps Butler - How to Run Locally (macOS)

Prerequisites
1) Python 3.11 or newer
2) Node.js and npm
3) Docker Desktop (Docker engine running)
4) Homebrew recommended (optional)

Initial Setup (one-time)
1) Create and activate a Python virtual environment:
   python3 -m venv venv
   source venv/bin/activate

2) Install Python dependencies:
   pip install -r requirements.txt

3) Ensure the Docker network exists:
   docker network create devops-butler-net || true

4) (Optional) Install frontend dependencies for development/build:
   cd frontend
   npm install

Run - Production Mode (serves built frontend on :8000)
1) Build the frontend (outputs to static/):
   cd frontend
   npm run build

2) Start the backend (from project root with venv active):
   python orchestrator.py

3) Open the app:
   http://localhost:8000

Run - Development Mode (hot reload)
Terminal A (backend):
   source venv/bin/activate
   python orchestrator.py

Terminal B (frontend):
   cd frontend
   npm run dev

Open the app:
   http://localhost:3000  (frontend dev server)
Backend API:
   http://localhost:8000

Health Check
   curl http://127.0.0.1:8000/health

Deploy via API (example)
   curl -X POST "http://127.0.0.1:8000/deploy" \
     -H "Content-Type: application/json" \
     -d '{"git_url": "https://github.com/some-user/some-repo.git"}'

Common Issues
1) Address already in use (port 8000)
   - Another instance is running. Stop it or kill the process using port 8000:
     macOS example:
       lsof -i :8000
       kill -9 <PID>
   - Or change the run port with uvicorn if needed:
       uvicorn orchestrator:app --host 0.0.0.0 --port 8001 --reload

2) Docker not running / network errors
   - Start Docker Desktop and re-run:
       docker network create devops-butler-net || true

3) Node/Vite not installed
   - Install Node.js, then run:
       cd frontend && npm install

Notes
- The backend serves files from the static/ directory when built.
- The custom Docker network devops-butler-net is required for containerized deployments.
- Logs are available in the logs/ directory.

